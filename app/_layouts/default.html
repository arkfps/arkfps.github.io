<!DOCTYPE html>

{% capture schema %}{% if layout.schema %}{{ layout.schema }}{% else %}{{ page.schema }}{% endif %}{% endcapture %}

<html
  lang="en-GB"
  itemscope itemtype="{{ schema }}"
  prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# {{ page.og_prefix }}">

  <head>
    <meta charset="utf-8">

    <!-- Mobile devices responsiveness. -->
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <!-- Page title. -->
    {% if page.is_home or page.layout == 'post' %}
    {% capture title %}{{ page.title | liquify | escape }}{% endcapture %}
    {% else %}
    {% capture _title %}{% if layout.title %}{{ layout.title }}{% else %}{{ page.title }}{% endif %}{% endcapture %}
    {% capture title %}{{ _title | liquify | escape }} — {{ site.title | escape }}{% endcapture %}
    {% endif %}
    <title>{{ title }}</title>
    <meta itemprop="name" content="{{ title }}">
    <meta property="og:title" content="{{ title }}">

    <!-- Page description. -->
    {% capture description %}{% if layout.description %}{{ layout.description }}{% else %}{{ page.description }}{% endif %}{% endcapture %}
    <meta name="description" content="{{ description | liquify | escape }}">
    <meta itemprop="description" content="{{ description | liquify | escape }}">
    <meta property="og:description" content="{{ description | liquify | escape }}">

    <!-- Page keywords. -->
    {% if layout.keywords %}
    {% assign keywords = layout.keywords | liquify | escape %}
    {% elsif page.keywords %}
    {% assign keywords = page.keywords | liquify | escape %}
    {% elsif page.tags %}
    {% assign keywords = page.tags | join:',' | liquify | escape %}
    {% endif %}
    {% if keywords %}
    <meta name="keywords" content="{{ keywords }}">
    <meta itemprop="keywords" content="{{ keywords }}">
    {% endif %}

    <!-- Page author. -->
    <meta name="author" content="{{ site.creator.full_name | escape }}">
    {% if schema != 'https://schema.org/BlogPosting' %}
    <meta itemprop="author" content="{{ site.creator.full_name | escape }}">
    {% endif %}

    <!-- Page image. -->
    {% if page.image %}
    {% capture page_image %}{{ site.url }}{{ page.image.url }}{% endcapture %}
    <!-- For posts we define "ImageObject" instead of simple "Image". -->
    {% if schema != 'https://schema.org/BlogPosting' %}
    <link itemprop="image" href="{{ page_image }}">
    {% endif %}
    <meta property="og:image" content="{{ page_image }}">
    <meta property="og:image:alt" content="{{ page.image.alt | liquify | escape }}">
    <meta property="og:image:type" content="{{ page.image.url | image_mime_type }}"/>
    <meta property="og:image:width" content="{{ page.image.url | image_width }}"/>
    <meta property="og:image:height" content="{{ page.image.url | image_height }}"/>
    <meta name="twitter:image:alt" content="{{ page.image.alt | liquify | escape }}">
    {% endif %}

    <!-- Open Graph site/page metadata. -->
    <meta property="og:site_name" content="{{ site.title | escape }}">
    <meta property="og:type" content="{{ page.og_type }}">
    <meta property="og:locale" content="en_GB">
    {% unless layout.generated %}
    <meta property="og:updated_time" content="{{ page.last_modified_at | date_to_xmlschema }}">
    {% endunless %}
    <meta property="og:rich_attachment" content="true">
    <meta property="fb:app_id" content="{{ site.facebook.app_id }}">
    <meta property="fb:profile_id" content="{{ site.facebook.profile_id }}">

    <!-- Open Graph article metadata. -->
    {% if page.og_type == 'article' %}
    <meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">
    <meta property="article:modified_time" content="{{ page.last_modified_at | date_to_xmlschema }}">
    <meta property="article:author" content="{{ site.facebook.profile }}">
    <meta property="article:section" content="{{ site.topic | escape }}">
    {% for tag in page.tags %}
    <meta property="article:tag" content="{{ tag | escape }}">
    {% endfor %}
    {% endif %}

    <!-- Open Graph profile metadata. -->
    {% if page.og_type == 'profile' %}
    <meta property="profile:first_name" content="{{ site.creator.first_name | escape }}">
    <meta property="profile:last_name" content="{{ site.creator.last_name | escape }}">
    <meta property="profile:username" content="{{ site.creator.username | escape }}">
    {% endif %}

    <!-- Twitter Cards. -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site:id" content="{{ site.twitter.site_id }}">
    <meta name="twitter:creator:id" content="{{ site.twitter.creator_id }}">

    <!-- Favicons. -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="{{ site.colours.black }}">
    <meta name="theme-color" content="{{ site.colours.black }}">

    <!-- Page canonical URL. -->
    {% capture canonical_url %}{{ site.url }}{{ page.url }}{% endcapture %}
    <link rel="canonical" href="{{ canonical_url }}">
    <link itemprop="url mainEntityOfPage" href="{{ canonical_url }}">
    <meta property="og:url" content="{{ canonical_url }}">

    <!-- Search engines indexing. -->
    {% if layout.sitemap == false or page.sitemap == false or paginator.previous_page %}
    <meta name="robots" content="noindex">
    {% endif %}

    <!-- Sitemap link for search engines. -->
    {% if page.is_home %}
    <link rel="sitemap" type="application/xml" title="Sitemap" href="{{ site.url }}/sitemap.xml">
    {% endif %}

    <!-- Pagination hints for search engines. -->
    {% if paginator.previous_page_path %}
    <link rel="prev" href="{{ site.url }}{{ paginator.previous_page_path }}">
    {% endif %}
    {% if paginator.next_page_path %}
    <link rel="next" href="{{ site.url }}{{ paginator.next_page_path }}">
    {% endif %}

    <!-- Web feed autodiscovery. -->
    {% if page.is_home %}
    <link rel="alternate" type="application/atom+xml" title="{{ site.title }} Blog Feed" href="{{ site.url }}/feed">
    {% endif %}

    <!-- Styles. -->
    <link rel="stylesheet" href="https://use.typekit.net/bck7qbl.css">
    <link rel="stylesheet" href="/css/app.css">
  </head>

  <body>
    <aside id="site-header">
      <div>
        <header>
          <h1 class="site-title">
            <a rel="home" href="/"><svg class="icon icon-balance-scale" role="img"><use xlink:href="/icn/symbol-defs.svg#icon-balance-scale"/></svg><br>{{ site.title | escape }}</a>
          </h1>
          <p>
            {{ site.tagline | escape }}
          </p>
        </header>
        <section class="site-tags">
          <h2 class="site-tags-title">
            <svg class="icon icon-tags" role="img">
              <title>Site Tags</title>
              <use xlink:href="/icn/symbol-defs.svg#icon-tags"/>
            </svg>
          </h2>
          <ul class="inline">
            {% assign tags = site.tags | keys | sort_natural %}
            {% for tag in tags %}
            <li class="site-tag">
              {% if forloop.first == false %} {% endif %}<a href="{{ tag | tag_url | remove:'.html' }}">{{ tag }}</a>{% if forloop.last == false %} {% endif %}
            </li>
            {% endfor %}
          </ul>
        </section>
        <nav class="site-nav">
          <h2 class="screenreader-only">Site Navigation</h2>
          <ul class="inline">
            <li>{% assign title = 'Home' %}<a rel="home" class="link-icon nav-icon" href="/" title="{{ title }}"><svg class="icon icon-home" role="img"><title>{{ title }}</title><use xlink:href="/icn/symbol-defs.svg#icon-home"/></svg></a></li>
            <li>{% assign title = 'Archive' %}<a class="link-icon nav-icon" href="/archive" title="{{ title }}"><svg class="icon icon-list" role="img"><title>{{ title }}</title><use xlink:href="/icn/symbol-defs.svg#icon-list"/></svg></a></li>
            <li>{% assign title = 'News Feed' %}<a rel="home alternate" class="link-icon nav-icon" href="/feed" title="{{ title }}" type="application/atom+xml"><svg class="icon icon-feed" role="img"><title>{{ title }}</title><use xlink:href="/icn/symbol-defs.svg#icon-feed"/></svg></a></li>
            <li>{% assign title = 'Contact' %}<a class="link-icon nav-icon" href="/contact" title="{{ title }}"><svg class="icon icon-question" role="img"><title>{{ title }}</title><use xlink:href="/icn/symbol-defs.svg#icon-question"/></svg></a></li>
            <li>{% assign title = 'About' %}<a rel="author" class="link-icon nav-icon" href="/about" title="{{ title }}"><svg class="icon icon-info" role="img"><title>{{ title }}</title><use xlink:href="/icn/symbol-defs.svg#icon-info"/></svg></a></li>
          </ul>
        </nav>
        <footer class="site-legal">
          <h2 class="screenreader-only">Legal Information</h2>
          <ul class="inline">
            <li>
              <a href="/legal/disclaimer"><small>Disclaimer</small></a>
              <small>‡</small>
            </li>
            <li>
              <a href="/legal/privacy-policy" title="Privacy Policy"><small>Privacy</small></a>
            </li>
          </ul>
          <p>
            <small>© {{ site.time | date: '%Y' }} {{ site.fqdn }}</small>
          </p>
        </footer>
      </div>
    </aside>
    <main id="main-content">
      <div>
        {{ content }}
      </div>
    </main>
    {% unless page.is_home %}
    <script>
      window.onpageshow = (evt) => {
        'use strict';
        // Scroll view to main content area of page if not coming from history.
        if (window.location.hash) return;  // ignore URLs with fragment
        const nav = performance.getEntriesByType('navigation');
        if (nav.length) {  // for Chrome/Opera, Firefox, Edge
          if (nav[0].type === 'back_forward') return;
        } else if (evt.persisted) { // for Safari
          return;
        }
        const main = document.getElementById('main-content');
        if (main.scrollIntoView) main.scrollIntoView({ behavior: 'smooth' });
      };
    </script>
    {% endunless %}
  </body>
</html>
